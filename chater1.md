### 자바8

우리가 현재 사용하는 컴퓨터에는 듀얼 또는 쿼드 코어 이상을 지원하는 CPU가 기본적으로 탑재되어 있다. 자바 8 이전의 자바 프로그램은 코어 중 하나만 사용했다. 나머지 코어는 유휴(idle) 상태로 두거나, 운영체제나 바이러스 검사 프로그램과 프로세스 파워를 나눠서 사용했다.

코드를 더 간결하게 작성하고 멀티코어 프로세서를 쉽게 활용할 수 있도록 자바 8에는 다음과 같은 새로운 기능이 추가되었다

- 스트림 API
- 메서드에 코드를 전달하는 기법
- 인터페이스의 디폴트 메서드

메서드에 코드를 전달할 뿐만 아니라, 결과를 반환하고 다른 자료구조로 전달할 수 있어 함수형 프로그래밍에서 큰 위력을 발휘한다.


### 스트림 api

스트림은 한 번에 한 개씩 처리되는 **연속적인 데이터 항목의 흐름**이다.
자바 8에서 도입된 `Streamt`는 T 타입 요소들을 필터링, 정렬, 매핑 등 다양한 연산을 **파이프라인 방식**으로 처리한다.

스트림은 기존의 `for-each` 같은 **외부 반복**과 달리, **내부 반복**을 통해 라이브러리가 데이터를 자동 처리하며, 멀티코어 환경에서도 병렬 처리를 쉽게 지원한다.

즉, 스트림 API의 핵심은 **데이터 흐름을 SQL처럼 선언적으로 표현**할 수 있고, **복잡한 스레드 제어 없이 병렬성까지 확보할 수 있다**는 점이다.


### 동작 파라미터화로 메서드에 코드 전달하기

자바 8에 추가된 또 하나의 주요 개념은 **코드 일부를 메서드의 인수로 전달하는 기능**이다.
자바 8 이전에는 메서드를 다른 메서드에 직접 전달할 수 없었다. 객체를 만들어 넘기는 방식은 가능했지만 복잡하고 재사용에도 적합하지 않았다.

자바 8에서는 메서드를 인수로 넘겨줄 수 있는 기능이 도입되었고, 이를 **동작 파라미터화**라고 부른다.


### 병렬성과 공유 가변 데이터

스트림은 병렬성을 지원하지만, **메서드로 전달되는 코드가 동시에 실행되더라도 안전하게 동작할 수 있어야 한다**.

이를 위해서는 **공유된 가변 데이터에 접근하지 않는 것**이 중요하다.
이처럼 다른 코드와 충돌 없이 동작할 수 있는 코드를 **순수 함수**, **부작용 없는 함수**, **상태 없는 함수**라고 한다.

자바 8 이전에는 공유 자원에 동시에 접근할 경우 `synchronized`를 사용해 제어했지만, 이는 시스템 성능에 악영향을 줄 수 있다.
스트림 API를 사용하면 **복잡한 스레드 제어 없이도 병렬성을 간단하게 활용**할 수 있다.


### 람다 익명함수

자바 8에서는 메서드를 일급 값으로 취급할 뿐만 아니라, **람다를 포함한 함수도 값으로 취급**할 수 있다.

예를 들어 다음 코드는 `x`라는 인수를 받아 `x + 1`을 반환하는 동작을 수행한다:

```java
(int x) -> x + 1
```

이처럼 람다 문법 형식으로 구현된 프로그램을 함수형 프로그래밍이라고 하며, 즉 함수를 일급 값으로 전달하는 방식의 프로그램 구현을 말한다.


### 디폴트 메서드와 자바 모듈

자바 8에서는 인터페이스를 쉽게 확장할 수 있도록 디폴트 메서드를 지원한다.

기존에는 인터페이스에 메서드를 추가하면, 해당 인터페이스를 구현하는 모든 클래스가 새로운 메서드를 구현해야 했다.
자바 8에서는 구현하지 않아도 되는 메서드를 인터페이스에 직접 추가할 수 있는 기능을 제공한다.

디폴트 메서드를 사용하면 기존 코드를 건드리지 않고도 원래의 인터페이스 설계를 자유롭게 확장할 수 있다.
이를 위해 default라는 새로운 키워드가 도입되었다.


### 함수형 프로그래밍에서 가져온 다른 유용한 아이디어

자바 8에서는 NullPointerException을 피할 수 있도록 도와주는 Optionalt 클래스를 제공한다.
Optionalt는 값을 갖거나 갖지 않을 수 있는 컨테이너 객체이며, 값이 없는 상황을 어떻게 처리할지 명시적으로 구현할 수 있는 메서드를 포함하고 있다.
